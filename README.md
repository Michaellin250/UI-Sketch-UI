# UI-Sketch
UI Development for DiifSketch by Pyqt5

This document is for illustrating how we could run and further develop the UI stuff for our project - DiffSketch. Generally, it is all based on **Python 3.8.2 and Pyqt5**. For efficient UI developing, please check [this book](https://drive.google.com/file/d/1am5yuj40Yep-iOdVWnGqFZ1HiYZf4dXg/view) I share for our team and [this project](https://github.com/learnpyqt/15-minute-apps) on Github.

## Requirement & Installation
* System Requirement:
  * Windows 10 (recommended) and Mac OS have been tested successfully. 
  * Graphics Driver that is compatible with **CUDA 10.2**
  * [Anaconda](https://www.anaconda.com/products/individual) (recommended) + Python 3.8.2 (3.7 and more should be fine)
  * Pyqt5 + Qt Designer (recommended, although you could design UI stuff all from coding but QT Designer provides a GUI to efficient interactive design)
  
* Software Installation:
  * Follow [this tutorial](https://www.youtube.com/watch?v=tZNnXL7cW6o) to set up Pyqt5 and Qt Designer
  * Suggest install Visual Studio Code for coding and version control
  * Put rendering files including **renderer.cpp, renderer_kernel.cu, setup.py, sketch.py, rendererpyw.py, and visual_hull.py** under the same folder with UI files (.ui and .py). 
  * Run the command line **“python setup.py install”** to set up rendering stuff
 
## UI Design & Development
1. Once installed successfully, Check whether you could open these two frameworks for two UI windows (**PaintView.ui and NavigationView3D.ui**) in Qt Designer:
![](/Images/0.png)
<div align="center">
 
*UI Framework in Qt Designer*
 
</div>

2. Once you wanna update some UI designs, run this command line to convert pyqt file (.ui) into python file (.py): **pyuic5  xxx.ui -o xxx.py**. The interactive functions of UI are all developed in the callView.py (I added comments in this file as well to give clues to understand all the functions for such two UI windows: PaintWindow and AppWindow. Run this file to check the running look of two windows:
![](/Images/1.PNG)
<div align="center">
 
*UI Overview* 
</div>

3. About the functions linking to the renderer: For the Navigation Window, we need to firstly import grid (basic objects like cube and cylinder, complex objects from SDF files like bunny) after the basic initialization and this is implemented in the rendererpyw.py. The final 2D image(called opened.png and stored in the results folder. These file names and path could be changed in the callView.py and rendererpyw.py) is generated by the function of update_image().

4. The rotation logic is implemented by following [virtualball](https://drive.google.com/file/d/1xeudNGtpYWPI87ozLqLuTU7o-6yKJlPG/view) and for this project, we are rotating the camera rather than the object and we are directly interacting with 2D images instead of camera directly (can be seen in 786 line of callView.py). Once click on select, this grid with fixed view will be transported to the painting window and be processed into the corresponding sketch (can be seen in 717 line of callView.py).

<div align="center">
<img src= "https://github.com/Duotun/UI-Sketch/blob/UI/Images/2.PNG">
 
*Free Rotation and Sketch Generation*
</div>

![](/Images/3.png)
<div align="center">
 
*Interaction between Two Windows*
 
</div>

5. For the Painting Window, some interactive functions like drawing with pen, erasing and filling colors are developed according to [this tutorial](https://github.com/learnpyqt/15-minute-apps/tree/master/paint) on Github and we utilize the QlistWidget, QvBoxLayout and QHBoxLayout to organize the creation of thumbnails (can bee seen in 220 line of callView.py).

6. For the three buttons: add, initialize, and update in the Painting Window, the main design ideas could be accessed in [these slides](https://drive.google.com/file/d/1yxuVAwnzrQ0_X0wBKX50r0JCunY9wA_W/view). After we draw enough sketches of different views, we could click on the add button to produce the thumbnail and then click on the initialize button to produce the corresponding 3d object (can be seen in the following image). We haven’t fully developed the function of update but the idea is that once we changed some sketches we could click on update button to renovate the shape of the reconstructed 3D object as well.
![](/Images/4.png)
<div align="center">
 
*Multi-view Thumbnails and 3D Shape Reconstruction*
</div>

## File Save & Load
* Images for UI designs can be accessed in the **icons folder**.
* SDF files are stored in **SDF Objects folder**.
* Sketch files (.png) are stored in the **results folder**.
* Mask files are stored in the **Views folder**.

We didn’t store thumbnails but the corresponding image could be recovered once double-click on the thumbnails. Some very technical details are not shown here but I think you could check codes as well because they are commented on very well.

Check this demo for full understanding about the current implementation:
https://drive.google.com/open?id=1KWrJDbmLKyakBqxmdjnIk0LtOcOUFRJW

Access to all the collection of codes and image files:
https://drive.google.com/open?id=10cogBpHOTLA5ldOr8OzG11umJjGeL_I9





